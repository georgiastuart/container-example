Bootstrap: docker
From: ubuntu:20.04

%files
    src/main.cpp /src/main.cpp
    test/test.py /test/test.py
    test/__init__.py /test/__init__.py
    CMakeLists.txt

%post
    ls
    export TZ="America/Chicago"
    ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
    apt-get update && apt-get -y install libeigen3-dev cmake g++ mpich libhdf5-mpich-dev
    mkdir build && cd build && cmake .. -DUSE_MPI=ON && make && make install && cd ..
    apt-get remove -y libeigen3-dev cmake g++ libhdf5-mpich-dev